{"ast":null,"code":"import _toConsumableArray from\"C:/Users/patil/Desktop/Blog Application Project/Test/blog-app-main (2)/blog-app-main/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/patil/Desktop/Blog Application Project/Test/blog-app-main (2)/blog-app-main/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/patil/Desktop/Blog Application Project/Test/blog-app-main (2)/blog-app-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useContext,useState}from\"react\";import{useEffect}from\"react\";import{Link,useParams}from\"react-router-dom\";import{Button,Card,CardBody,CardText,Col,Container,Input,Row}from\"reactstrap\";import Base from\"../components/Base\";import{createComment,loadPost}from\"../services/post-service\";import{toast}from\"react-toastify\";import{BASE_URL}from\"../services/helper\";import{isLoggedIn}from\"../auth\";import userContext from\"../context/userContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PostPage=function PostPage(){var _useParams=useParams(),postId=_useParams.postId;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];//context Comment user name\n// const [name,setUser] = useState(\"\")\n// const user = useContext(userContext);\n// let user2=user.name;\n// console.log(user2)\nvar _useState3=useState({content:\" \"}),_useState4=_slicedToArray(_useState3,2),comment=_useState4[0],setComment=_useState4[1];useEffect(function(){// load post of postId\n//setUser(user2)\nloadPost(postId).then(function(data){console.log(data);setPost(data);}).catch(function(error){console.log(error);toast.error(\"Error in loading post\");});},[]);var printDate=function printDate(numbers){return new Date(numbers).toLocaleDateString();};var submitPost=function submitPost(){if(!isLoggedIn()){toast.error(\"Need to login first !!\");return;}if(comment.content.trim()===\"\"){return;}createComment(comment,post.postId).then(function(data){console.log(data);toast.success(\"comment added ..\");setPost(_objectSpread(_objectSpread({},post),{},{comments:[].concat(_toConsumableArray(post.comments),[data.data])}));setComment({content:\"\"});}).catch(function(error){console.log(error);});};return/*#__PURE__*/_jsx(Base,{children:/*#__PURE__*/_jsxs(Container,{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Home\"}),\" / \",post&&/*#__PURE__*/_jsxs(Link,{to:\"\",children:[\" \",post.category.categoryTitle,\" \"]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:{size:12},children:/*#__PURE__*/_jsx(Card,{className:\"mt-3 ps-2 border-0 shadow-sm\",children:post&&/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsxs(CardText,{children:[\" \",\"Posted By \",/*#__PURE__*/_jsx(\"b\",{children:post.user.name}),\" on\",\" \",/*#__PURE__*/_jsxs(\"b\",{children:[printDate(post.addedDate),\" \"]}),\" \"]}),/*#__PURE__*/_jsx(CardText,{children:/*#__PURE__*/_jsx(\"span\",{className:\"text-muted\",children:post.category.categoryTitle})}),/*#__PURE__*/_jsx(\"div\",{className:\"divder\",style:{width:\"100%\",height:\"1px\",background:\"#e2e2e2\"}}),/*#__PURE__*/_jsx(CardText,{className:\"mt-3\",children:/*#__PURE__*/_jsx(\"h1\",{children:post.title})}),/*#__PURE__*/_jsx(\"img\",{className:\"img-fluid mt-4 shadow\",style:{maxWidth:\"100%\",maxHeight:\"500px\"},src:BASE_URL+'/get/image/'+postId,onError:function onError(_ref){var currentTarget=_ref.currentTarget;currentTarget.onerror=null;// prevents looping\ncurrentTarget.src=\"https://i.ibb.co/ngyckYP/ebook.jpg\";}}),/*#__PURE__*/_jsx(CardText,{className:\"mt-5\",dangerouslySetInnerHTML:{__html:post.content}})]})})})}),/*#__PURE__*/_jsx(Row,{className:\"my-4\",children:/*#__PURE__*/_jsxs(Col,{md:{size:9,offset:1},children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Comments ( \",post?post.comments.length:0,\" )\"]}),post&&post.comments.map(function(c,index){return/*#__PURE__*/_jsx(Card,{className:\"mt-4 border-0\",children:/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsx(CardText,{children:c.content})})},index);}),/*#__PURE__*/_jsx(Card,{className:\"mt-4 border-0\",children:/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(Input,{type:\"textarea\",placeholder:\"Enter comment here\",value:comment.content,onChange:function onChange(event){return setComment({content:event.target.value});}}),/*#__PURE__*/_jsx(Button,{onClick:submitPost,className:\"mt-2\",color:\"primary\",children:\"Submit\"})]})})]})})]})});};export default PostPage;","map":{"version":3,"names":["useContext","useState","useEffect","Link","useParams","Button","Card","CardBody","CardText","Col","Container","Input","Row","Base","createComment","loadPost","toast","BASE_URL","isLoggedIn","userContext","PostPage","postId","post","setPost","content","comment","setComment","then","data","console","log","catch","error","printDate","numbers","Date","toLocaleDateString","submitPost","trim","success","comments","category","categoryTitle","size","user","name","addedDate","width","height","background","title","maxWidth","maxHeight","currentTarget","onerror","src","__html","offset","length","map","c","index","event","target","value"],"sources":["C:/Users/patil/Desktop/Blog Application Project/Test/blog-app-main (2)/blog-app-main/src/pages/PostPage.jsx"],"sourcesContent":["import { useContext, useState } from \"react\";\nimport { useEffect } from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport {\n  Button,\n  Card,\n  CardBody,\n  CardText,\n  Col,\n  Container,\n  Input,\n  Row,\n} from \"reactstrap\";\nimport Base from \"../components/Base\";\nimport { createComment, loadPost } from \"../services/post-service\";\nimport { toast } from \"react-toastify\";\nimport { BASE_URL } from \"../services/helper\";\nimport { isLoggedIn } from \"../auth\";\nimport userContext from \"../context/userContext\";\n\n\nconst PostPage = () => {\n  const { postId } = useParams();\n  const [post, setPost] = useState(null);\n\n  \n  //context Comment user name\n  // const [name,setUser] = useState(\"\")\n  // const user = useContext(userContext);\n  // let user2=user.name;\n  // console.log(user2)\n\n\n  \n  const [comment, setComment] = useState({\n    content: \" \",\n  });\n\n  useEffect(() => {\n    // load post of postId\n    //setUser(user2)\n    loadPost(postId)\n      .then((data) => {\n        console.log(data);\n        setPost(data);\n      })\n      .catch((error) => {\n        console.log(error);\n        toast.error(\"Error in loading post\");\n      });\n  }, []);\n\n  const printDate = (numbers) => {\n    return new Date(numbers).toLocaleDateString();\n  };\n\n  const submitPost = () => {\n    if (!isLoggedIn()) {\n      toast.error(\"Need to login first !!\");\n      return;\n    }\n\n    if (comment.content.trim() === \"\") {\n      return;\n    }\n    createComment(comment, post.postId)\n      .then((data) => {\n        console.log(data);\n        toast.success(\"comment added ..\");\n        setPost({\n          ...post,\n          comments: [...post.comments, data.data],\n        });\n        setComment({\n          content: \"\",\n        });\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  return (\n    <Base>\n      <Container className=\"mt-4\">\n      <br></br>\n        <Link to=\"/\">Home</Link> / {post && <Link to=\"\"> {post.category.categoryTitle} </Link>}\n        <Row>\n          <Col\n            md={{\n              size: 12,\n            }}\n          >\n            <Card className=\"mt-3 ps-2 border-0 shadow-sm\">\n              {post && (\n                <CardBody>\n                  <CardText>\n                    {\" \"}\n                    Posted By <b>{post.user.name}</b> on{\" \"}\n                    <b>{printDate(post.addedDate)} </b>{\" \"}\n                  </CardText>\n\n                  <CardText>\n                    <span className=\"text-muted\">\n                      {post.category.categoryTitle}\n                    </span>\n                  </CardText>\n\n                  <div\n                    className=\"divder\"\n                    style={{\n                      width: \"100%\",\n                      height: \"1px\",\n                      background: \"#e2e2e2\",\n                    }}\n                  ></div>\n\n                  <CardText className=\"mt-3\">\n                    <h1>{post.title}</h1>\n                  </CardText>\n                  {/* <div\n                    className=\"image-container  mt-4 shadow  \"\n                    style={{ maxWidth: \"50%\" }}\n                  > */}\n                    {/* <img className=\"img-fluid\" id=\"foo\" src={BASE_URL + '/get/image/' + postId} /> */}\n\n                    <img className=\"img-fluid mt-4 shadow\"\n                    style={{ maxWidth: \"100%\" , maxHeight:\"500px\" }}\n                      src={BASE_URL + '/get/image/' + postId}\n                      onError={({ currentTarget }) => {\n                        currentTarget.onerror = null; // prevents looping\n                        currentTarget.src = \"https://i.ibb.co/ngyckYP/ebook.jpg\";\n                      }}\n                    />\n\n                    {/* <img className=\"img-fluid\" src={\"https://i.ibb.co/GtQDBrN/luigi-pozzoli-Db8x-EYwtd-Ww-unsplash-3.jpg\"} alt=\"\" /> */}\n                  {/* </div> */}\n                  <CardText\n                    className=\"mt-5\"\n                    dangerouslySetInnerHTML={{ __html: post.content }}\n                  ></CardText>\n                </CardBody>\n              )}\n            </Card>\n          </Col>\n        </Row>\n        <Row className=\"my-4\">\n          <Col\n            md={{\n              size: 9,\n              offset: 1,\n            }}\n          >\n            <h3>Comments ( {post ? post.comments.length : 0} )</h3>\n\n            {post &&\n              post.comments.map((c, index) => (\n                <Card className=\"mt-4 border-0\" key={index}>\n                  <CardBody>\n                    <CardText>{c.content}</CardText>\n                  </CardBody>\n                </Card>\n              ))}\n\n            <Card className=\"mt-4 border-0\">\n              <CardBody>\n                <Input\n                  type=\"textarea\"\n                  placeholder=\"Enter comment here\"\n                  value={comment.content}\n                  onChange={(event) =>\n                    setComment({ content: event.target.value })\n                  }\n                />\n\n                <Button onClick={submitPost} className=\"mt-2\" color=\"primary\">\n                  Submit\n                </Button>\n              </CardBody>\n            </Card>\n          </Col>\n        </Row>\n      </Container>\n    </Base>\n  );\n};\n\nexport default PostPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}