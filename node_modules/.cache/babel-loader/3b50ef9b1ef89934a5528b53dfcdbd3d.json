{"ast":null,"code":"import _defineProperty from\"C:/Users/patil/Desktop/Blog Application Project/Test/blog-app-main (2)/blog-app-main/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/patil/Desktop/Blog Application Project/Test/blog-app-main (2)/blog-app-main/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/patil/Desktop/Blog Application Project/Test/blog-app-main (2)/blog-app-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{useEffect}from\"react\";import{Card,CardBody,Form,Input,Label,Button,Container}from\"reactstrap\";import{loadAllCategories}from\"../services/category-service\";import JoditEditor from\"jodit-react\";import{useRef}from\"react\";import{createPost as doCreatePost,uploadPostImage}from\"../services/post-service\";import{getCurrentUserDetail}from\"../auth\";import{toast}from\"react-toastify\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddPost=function AddPost(){var editor=useRef(null);// const [content,setContent] =useState('')\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),categories=_useState2[0],setCategories=_useState2[1];var _useState3=useState(undefined),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),image=_useState6[0],setImage=_useState6[1];var _useState7=useState({title:\"\",content:\"\",categoryId:\"\"}),_useState8=_slicedToArray(_useState7,2),post=_useState8[0],setPost=_useState8[1];// const config={\n//     placeholder:\"Start typing...\",\n// }\nuseEffect(function(){setUser(getCurrentUserDetail());loadAllCategories().then(function(data){console.log(data);setCategories(data);}).catch(function(error){console.log(error);});},[]);//field changed function\nvar fieldChanged=function fieldChanged(event){// console.log(event)\nsetPost(_objectSpread(_objectSpread({},post),{},_defineProperty({},event.target.name,event.target.value)));};//   file change uplad event\nvar handleFileChange=function handleFileChange(event){console.log(event.target.files[0]);setImage(event.target.files[0]);};var contentFieldChanaged=function contentFieldChanaged(data){setPost(_objectSpread(_objectSpread({},post),{},{content:data}));};//create post function\nvar createPost=function createPost(event){event.preventDefault();// console.log(post)\nif(post.title.trim()===\"\"){toast.error(\"post  title is required !!\");return;}if(post.content.trim()===\"\"){toast.error(\"post content is required !!\");return;}if(post.categoryId===\"\"){toast.error(\"select some category !!\");return;}//submit the form one server\npost[\"userId\"]=user.id;doCreatePost(post).then(function(data){uploadPostImage(image,data.postId).then(function(data){toast.success(\"Image uploaded.\");});//   .catch(error => {\n//     toast.error(\"Error in uploading\")\n//     console.log(error)\n//   })\ntoast.success(\"Post Created !!\");// console.log(post)\nsetPost({title:\"\",content:\"\",categoryId:\"\"});}).catch(function(error){toast.error(\"Post not created due to some error !!\");console.log(error);});};return/*#__PURE__*/_jsx(\"div\",{className:\"wrapper pt-5\",children:/*#__PURE__*/_jsx(Card,{className:\"shadow-sm  border-0 mt-2\",children:/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"What going in your mind ?\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:createPost,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"my-3\",children:[/*#__PURE__*/_jsx(Label,{for:\"title\",children:\"Post title\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",id:\"title\",placeholder:\"Enter here\",className:\"rounded-0\",name:\"title\",onChange:fieldChanged})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-3\",children:[/*#__PURE__*/_jsx(Label,{for:\"content\",children:\"Post Content\"}),/*#__PURE__*/_jsx(JoditEditor,{ref:editor,value:post.content,onChange:function onChange(newContent){return contentFieldChanaged(newContent);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(Label,{for:\"image\",children:\"Select Cover image\"}),/*#__PURE__*/_jsx(Input,{id:\"image\",name:\"image\",type:\"file\",onChange:handleFileChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-3\",children:[/*#__PURE__*/_jsx(Label,{for:\"category\",children:\"Post Category\"}),/*#__PURE__*/_jsxs(Input,{type:\"select\",id:\"category\",placeholder:\"Enter here\",className:\"rounded-0\",name:\"categoryId\",onChange:fieldChanged,defaultValue:0,children:[/*#__PURE__*/_jsx(\"option\",{disabled:true,value:0,children:\"--Select category--\"}),categories.map(function(category){return/*#__PURE__*/_jsx(\"option\",{value:category.categoryId,children:category.categoryTitle},category.categoryId);})]})]}),/*#__PURE__*/_jsxs(Container,{className:\"text-center\",children:[/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"rounded-0\",color:\"primary\",children:\"Create Post\"}),/*#__PURE__*/_jsx(Button,{type:\"reset\",className:\"rounded-0 ms-2\",color:\"danger\",children:\"Reset Content\"})]})]})]})})});};export default AddPost;","map":{"version":3,"names":["useState","useEffect","Card","CardBody","Form","Input","Label","Button","Container","loadAllCategories","JoditEditor","useRef","createPost","doCreatePost","uploadPostImage","getCurrentUserDetail","toast","AddPost","editor","categories","setCategories","undefined","user","setUser","image","setImage","title","content","categoryId","post","setPost","then","data","console","log","catch","error","fieldChanged","event","target","name","value","handleFileChange","files","contentFieldChanaged","preventDefault","trim","id","postId","success","newContent","map","category","categoryTitle"],"sources":["C:/Users/patil/Desktop/Blog Application Project/Test/blog-app-main (2)/blog-app-main/src/components/AddPost.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport {\n  Card,\n  CardBody,\n  Form,\n  Input,\n  Label,\n  Button,\n  Container,\n} from \"reactstrap\";\nimport { loadAllCategories } from \"../services/category-service\";\nimport JoditEditor from \"jodit-react\";\nimport { useRef } from \"react\";\nimport { createPost as doCreatePost, uploadPostImage } from \"../services/post-service\";\nimport { getCurrentUserDetail } from \"../auth\";\nimport { toast } from \"react-toastify\";\nconst AddPost = () => {\n  const editor = useRef(null);\n  // const [content,setContent] =useState('')\n  const [categories, setCategories] = useState([]);\n  const [user, setUser] = useState(undefined);\n  const [image,setImage] = useState(null);\n\n  const [post, setPost] = useState({\n    title: \"\",\n    content: \"\",\n    categoryId: \"\"\n  });\n\n  \n  // const config={\n  //     placeholder:\"Start typing...\",\n\n  // }\n\n \n\n  useEffect(() => {\n    setUser(getCurrentUserDetail());\n    loadAllCategories()\n      .then((data) => {\n        console.log(data);\n        setCategories(data);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }, []);\n\n  //field changed function\n  const fieldChanged = (event) => {\n    // console.log(event)\n    setPost({ ...post, [event.target.name]: event.target.value });\n  };\n\n   //   file change uplad event\n   const handleFileChange = (event) => {\n    console.log(event.target.files[0]);\n    setImage(event.target.files[0]);\n  };\n\n  const contentFieldChanaged = (data) => {\n    setPost({ ...post, content: data });\n  };\n\n  //create post function\n  const createPost = (event) => {\n    event.preventDefault();\n\n    // console.log(post)\n    if (post.title.trim() === \"\") {\n      toast.error(\"post  title is required !!\");\n      return;\n    }\n\n    if (post.content.trim() === \"\") {\n      toast.error(\"post content is required !!\");\n      return;\n    }\n\n    if (post.categoryId === \"\") {\n      toast.error(\"select some category !!\");\n      return;\n    }\n\n    //submit the form one server\n    post[\"userId\"] = user.id;\n    doCreatePost(post)\n      .then((data) => {\n        uploadPostImage(image, data.postId)\n          .then(data => {\n            toast.success(\"Image uploaded.\")\n          })\n        //   .catch(error => {\n        //     toast.error(\"Error in uploading\")\n        //     console.log(error)\n        //   })\n        toast.success(\"Post Created !!\");\n        // console.log(post)\n\n        setPost({\n          title: \"\",\n          content: \"\",\n          categoryId: \"\",\n        });\n      })\n      .catch((error) => {\n        toast.error(\"Post not created due to some error !!\");\n        console.log(error)\n      });\n  };\n\n  \n\n  return (\n    <div className=\"wrapper pt-5\">\n      <Card className=\"shadow-sm  border-0 mt-2\">\n        <CardBody>\n          {/* {JSON.stringify(post)} */}\n          <h3>What going in your mind ?</h3>\n          <Form onSubmit={createPost}>\n            <div className=\"my-3\">\n              <Label for=\"title\">Post title</Label>\n              <Input\n                type=\"text\"\n                id=\"title\"\n                placeholder=\"Enter here\"\n                className=\"rounded-0\"\n                name=\"title\"\n                onChange={fieldChanged}\n              />\n            </div>\n\n            <div className=\"my-3\">\n              <Label for=\"content\">Post Content</Label>\n              {/* <Input\n                                type=\"textarea\"\n                                id=\"content\"\n                                placeholder=\"Enter here\"\n                                className=\"rounded-0\"\n                                style={{ height: '300px' }}\n                            /> */}\n\n              <JoditEditor\n                ref={editor}\n                value={post.content}\n                onChange={(newContent) => contentFieldChanaged(newContent)}\n              />\n            </div>\n            {/* file filed */}\n            <div className=\"mt-3\">\n              <Label for=\"image\">Select Cover image</Label>\n              <Input id=\"image\" name=\"image\" type=\"file\" onChange={handleFileChange} />\n            </div>\n\n            <div className=\"my-3\">\n              <Label for=\"category\">Post Category</Label>\n              <Input\n                type=\"select\"\n                id=\"category\"\n                placeholder=\"Enter here\"\n                className=\"rounded-0\"\n                name=\"categoryId\"\n                onChange={fieldChanged}\n                defaultValue={0}\n              >\n                <option disabled value={0}>\n                  --Select category--\n                </option>\n\n                {categories.map((category) => (\n                  <option value={category.categoryId} key={category.categoryId}>\n                    {category.categoryTitle}\n                  </option>\n                ))}\n              </Input>\n            </div>\n\n            <Container className=\"text-center\">\n              <Button type=\"submit\" className=\"rounded-0\" color=\"primary\">\n                Create Post\n              </Button>\n              <Button type=\"reset\" className=\"rounded-0 ms-2\" color=\"danger\" >\n                Reset Content\n                \n              </Button>\n            </Container>\n          </Form>\n        </CardBody>\n      </Card>\n    </div>\n  );\n};\n\nexport default AddPost;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}