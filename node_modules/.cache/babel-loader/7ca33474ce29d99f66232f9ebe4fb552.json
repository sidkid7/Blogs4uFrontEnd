{"ast":null,"code":"import _toConsumableArray from\"C:/Users/patil/Desktop/Blog Application Project/Test/blog-app-main (2)/blog-app-main/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/patil/Desktop/Blog Application Project/Test/blog-app-main (2)/blog-app-main/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/patil/Desktop/Blog Application Project/Test/blog-app-main (2)/blog-app-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{useEffect}from\"react\";import{Link,useParams}from\"react-router-dom\";import{Button,Card,CardBody,CardText,Col,Container,Input,Row}from\"reactstrap\";import Base from\"../components/Base\";import{createComment,loadPost}from\"../services/post-service\";import{toast}from'react-toastify';import{BASE_URL}from\"../services/helper\";import{isLoggedIn}from\"../auth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PostPage=function PostPage(){var _useParams=useParams(),postId=_useParams.postId;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var _useState3=useState({conent:''}),_useState4=_slicedToArray(_useState3,2),comment=_useState4[0],setComment=_useState4[1];useEffect(function(){// load post of postId \nloadPost(postId).then(function(data){console.log(data);setPost(data);}).catch(function(error){console.log(error);toast.error(\"Error in loading post\");});},[]);var printDate=function printDate(numbers){return new Date(numbers).toLocaleDateString();};var submitPost=function submitPost(){if(!isLoggedIn()){toast.error(\"Need to login first !!\");return;}if(comment.content.trim()===''){return;}createComment(comment,post.postId).then(function(data){console.log(data);toast.success(\"comment added ..\");setPost(_objectSpread(_objectSpread({},post),{},{comments:[].concat(_toConsumableArray(post.comments),[data.data])}));setComment({content:''});}).catch(function(error){console.log(error);});};return/*#__PURE__*/_jsx(Base,{children:/*#__PURE__*/_jsxs(Container,{className:\"mt-4\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Home\"}),\" / \",post&&/*#__PURE__*/_jsxs(Link,{to:\"\",children:[\"  \",post.title,\" \"]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:{size:12},children:/*#__PURE__*/_jsx(Card,{className:\"mt-3 ps-2 border-0 shadow-sm\",children:post&&/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsxs(CardText,{children:[\" Posted By \",/*#__PURE__*/_jsx(\"b\",{children:post.user.name}),\" on \",/*#__PURE__*/_jsxs(\"b\",{children:[printDate(post.addedDate),\" \"]}),\" \"]}),/*#__PURE__*/_jsx(CardText,{children:/*#__PURE__*/_jsx(\"span\",{className:\"text-muted\",children:post.category.categoryTitle})}),/*#__PURE__*/_jsx(\"div\",{className:\"divder\",style:{width:'100%',height:'1px',background:'#e2e2e2'}}),/*#__PURE__*/_jsx(CardText,{className:\"mt-3\",children:/*#__PURE__*/_jsx(\"h1\",{children:post.title})}),/*#__PURE__*/_jsx(\"div\",{className:\"image-container  mt-4 shadow  \",style:{maxWidth:'50%'},children:/*#__PURE__*/_jsx(\"img\",{className:\"img-fluid\",src:BASE_URL+'/post/image/'+post.imageName,alt:\"\"})}),/*#__PURE__*/_jsx(CardText,{className:\"mt-5\",dangerouslySetInnerHTML:{__html:post.content}})]})})})}),/*#__PURE__*/_jsx(Row,{className:\"my-4\",children:/*#__PURE__*/_jsxs(Col,{md:{size:9,offset:1},children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Comments ( \",post?post.comments.length:0,\" )\"]}),post&&post.comments.map(function(c,index){return/*#__PURE__*/_jsx(Card,{className:\"mt-4 border-0\",children:/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsx(CardText,{children:c.content})})},index);}),/*#__PURE__*/_jsx(Card,{className:\"mt-4 border-0\",children:/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(Input,{type:\"textarea\",placeholder:\"Enter comment here\",value:comment.content,onChange:function onChange(event){return setComment({content:event.target.value});}}),/*#__PURE__*/_jsx(Button,{onClick:submitPost,className:\"mt-2\",color:\"primary\",children:\"Submit\"})]})})]})})]})});};export default PostPage;","map":{"version":3,"names":["useState","useEffect","Link","useParams","Button","Card","CardBody","CardText","Col","Container","Input","Row","Base","createComment","loadPost","toast","BASE_URL","isLoggedIn","PostPage","postId","post","setPost","conent","comment","setComment","then","data","console","log","catch","error","printDate","numbers","Date","toLocaleDateString","submitPost","content","trim","success","comments","title","size","user","name","addedDate","category","categoryTitle","width","height","background","maxWidth","imageName","__html","offset","length","map","c","index","event","target","value"],"sources":["C:/Users/patil/Desktop/Blog Application Project/Test/blog-app-main (2)/blog-app-main/src/pages/PostPage.jsx"],"sourcesContent":["import { useState } from \"react\"\nimport { useEffect } from \"react\"\nimport { Link, useParams } from \"react-router-dom\"\nimport { Button, Card, CardBody, CardText, Col, Container, Input, Row } from \"reactstrap\"\nimport Base from \"../components/Base\"\nimport { createComment, loadPost } from \"../services/post-service\"\nimport { toast } from 'react-toastify'\nimport { BASE_URL } from \"../services/helper\"\nimport { isLoggedIn } from \"../auth\"\nconst PostPage = () => {\n\n    const { postId } = useParams()\n    const [post, setPost] = useState(null)\n    const [comment, setComment] = useState({\n        conent: ''\n    })\n\n    useEffect(() => {\n        // load post of postId \n        loadPost(postId).then(data => {\n            console.log(data);\n            setPost(data)\n\n        }).catch(error => {\n            console.log(error)\n            toast.error(\"Error in loading post\")\n        })\n\n    }, [])\n\n    const printDate = (numbers) => {\n\n        return new Date(numbers).toLocaleDateString()\n    }\n\n    const submitPost=()=>{\n\n        if(!isLoggedIn()){\n                toast.error(\"Need to login first !!\")\n                return\n        }\n\n        if(comment.content.trim()===''){\n            return\n        }\n        createComment(comment,post.postId)\n        .then(data=>{\n            console.log(data)\n            toast.success(\"comment added ..\")\n            setPost({\n                ...post,\n                comments:[...post.comments,data.data]\n            })\n            setComment({\n                content:''\n            })\n        }).catch(error=>{\n            console.log(error)\n        })\n    }\n\n    return (\n\n        <Base>\n\n\n            <Container className=\"mt-4\">\n\n                <Link to=\"/\">Home</Link> / {post && (<Link to=\"\" >  {post.title} </Link>)}\n\n                <Row>\n\n                    <Col md={{\n                        size: 12\n                    }}>\n\n                        <Card className=\"mt-3 ps-2 border-0 shadow-sm\" >\n\n\n                            {\n                                (post) && (\n                                    <CardBody>\n                                        <CardText> Posted By <b>{post.user.name}</b> on <b>{printDate(post.addedDate)} </b> </CardText>\n\n                                        <CardText>\n                                            <span className=\"text-muted\">{post.category.categoryTitle}</span>\n                                        </CardText>\n\n                                        <div className=\"divder\" style={{\n                                            width: '100%',\n                                            height: '1px',\n                                            background: '#e2e2e2'\n\n                                        }}></div>\n\n                                        <CardText className=\"mt-3\">\n                                            <h1>{post.title}</h1>\n                                        </CardText>\n                                        <div className=\"image-container  mt-4 shadow  \" style={{ maxWidth: '50%' }}>\n                                            <img className=\"img-fluid\" src={BASE_URL + '/post/image/' + post.imageName} alt=\"\" />\n                                        </div>\n                                        <CardText className=\"mt-5\" dangerouslySetInnerHTML={{ __html: post.content }}>\n\n                                        </CardText>\n\n                                    </CardBody>\n                                )\n                            }\n\n                        </Card>\n\n                    </Col>\n                </Row>\n\n                <Row className=\"my-4\">\n\n                    <Col md={\n\n                        {\n                            size: 9,\n                            offset: 1\n                        }\n                    }>\n                        <h3>Comments ( {post ? post.comments.length : 0} )</h3>\n\n                        {\n                            post && post.comments.map((c, index) => (\n                                <Card className=\"mt-4 border-0\" key={index}>\n                                    <CardBody>\n                                        <CardText>\n                                            {c.content}\n                                        </CardText>\n                                    </CardBody>\n                                </Card>\n                            ))\n                        }\n\n                        <Card className=\"mt-4 border-0\" >\n                            <CardBody>\n\n                                <Input\n                                    type=\"textarea\"\n                                    placeholder=\"Enter comment here\"\n                                    value={comment.content}\n                                    onChange={(event) => setComment({content:event.target.value})}\n                                />\n\n                                <Button  onClick={submitPost} className=\"mt-2\" color=\"primary\">Submit</Button>\n                            </CardBody>\n                        </Card>\n\n                    </Col>\n\n                </Row>\n\n            </Container>\n\n\n        </Base>\n\n    )\n}\n\nexport default PostPage"],"mappings":"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"},"metadata":{},"sourceType":"module"}