{"ast":null,"code":"import _defineProperty from\"C:/Users/patil/Desktop/Blog Application Project/Test/blog-app-main (2)/blog-app-main/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/patil/Desktop/Blog Application Project/Test/blog-app-main (2)/blog-app-main/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/patil/Desktop/Blog Application Project/Test/blog-app-main (2)/blog-app-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{useEffect}from\"react\";import{Card,CardBody,Form,Input,Label,Button,Container}from\"reactstrap\";import{loadAllCategories}from\"../services/category-service\";import JoditEditor from\"jodit-react\";import{useRef}from\"react\";import{createPost as doCreatePost}from\"../services/post-service\";import{getCurrentUserDetail}from\"../auth\";import{toast}from\"react-toastify\";import{Navigate,useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddPost=function AddPost(){var editor=useRef(null);// const [content,setContent] =useState('')\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),categories=_useState2[0],setCategories=_useState2[1];var _useState3=useState(undefined),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var _useState5=useState({title:\"\",content:\"\",categoryId:\"\"}),_useState6=_slicedToArray(_useState5,2),post=_useState6[0],setPost=_useState6[1];var navigate=useNavigate();// const config={\n//     placeholder:\"Start typing...\",\n// }\nuseEffect(function(){setUser(getCurrentUserDetail());loadAllCategories().then(function(data){console.log(data);setCategories(data);}).catch(function(error){console.log(error);});},[]);//field changed function\nvar fieldChanged=function fieldChanged(event){// console.log(event)\nsetPost(_objectSpread(_objectSpread({},post),{},_defineProperty({},event.target.name,event.target.value)));};var contentFieldChanaged=function contentFieldChanaged(data){setPost(_objectSpread(_objectSpread({},post),{},{content:data}));};//create post function\nvar createPost=function createPost(event){event.preventDefault();// console.log(post)\nif(post.title.trim()===\"\"){toast.error(\"post  title is required !!\");return;}if(post.content.trim()===\"\"){toast.error(\"post content is required !!\");return;}if(post.categoryId===\"\"){toast.error(\"select some category !!\");return;}//submit the form one server\npost[\"userId\"]=user.id;doCreatePost(post).then(function(data){toast.success(\"Post Created !!\");// console.log(post)\nsetPost({title:\"\",content:\"\",categoryId:\"\"});navigate(\"/\");}).catch(function(error){toast.error(\"Post not created due to some error !!\");// console.log(error)\n});};return/*#__PURE__*/_jsx(\"div\",{className:\"wrapper pt-5\",children:/*#__PURE__*/_jsx(Card,{className:\"shadow-sm  border-0 mt-2\",children:/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"What going in your mind ?\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:createPost,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"my-3\",children:[/*#__PURE__*/_jsx(Label,{for:\"title\",children:\"Post title\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",id:\"title\",placeholder:\"Enter here\",className:\"rounded-0\",name:\"title\",onChange:fieldChanged})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-3\",children:[/*#__PURE__*/_jsx(Label,{for:\"content\",children:\"Post Content\"}),/*#__PURE__*/_jsx(JoditEditor,{ref:editor,value:post.content,onChange:function onChange(newContent){return contentFieldChanaged(newContent);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsxs(Label,{for:\"image\",children:[\"Select Cover image\",/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsx(\"small\",{children:\" \\xA0\\xA0(local file upload not working in online version)\"})})})]}),/*#__PURE__*/_jsx(Input,{type:\"file\",className:\"disabled:true\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-3\",children:[/*#__PURE__*/_jsx(Label,{for:\"category\",children:\"Post Category\"}),/*#__PURE__*/_jsxs(Input,{type:\"select\",id:\"category\",placeholder:\"Enter here\",className:\"rounded-0\",name:\"categoryId\",onChange:fieldChanged,defaultValue:0,children:[/*#__PURE__*/_jsx(\"option\",{disabled:true,value:0,children:\"--Select category--\"}),categories.map(function(category){return/*#__PURE__*/_jsx(\"option\",{value:category.categoryId,children:category.categoryTitle},category.categoryId);})]})]}),/*#__PURE__*/_jsxs(Container,{className:\"text-center\",children:[/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"rounded-0\",color:\"success\",children:\"Create Post\"}),/*#__PURE__*/_jsx(Button,{type:\"reset\",className:\"rounded-0 ms-2\",color:\"secondary\",children:\"Reset Content\"})]})]})]})})});};export default AddPost;","map":{"version":3,"names":["useState","useEffect","Card","CardBody","Form","Input","Label","Button","Container","loadAllCategories","JoditEditor","useRef","createPost","doCreatePost","getCurrentUserDetail","toast","Navigate","useNavigate","AddPost","editor","categories","setCategories","undefined","user","setUser","title","content","categoryId","post","setPost","navigate","then","data","console","log","catch","error","fieldChanged","event","target","name","value","contentFieldChanaged","preventDefault","trim","id","success","newContent","map","category","categoryTitle"],"sources":["C:/Users/patil/Desktop/Blog Application Project/Test/blog-app-main (2)/blog-app-main/src/components/AddPost.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport {\n  Card,\n  CardBody,\n  Form,\n  Input,\n  Label,\n  Button,\n  Container,\n} from \"reactstrap\";\nimport { loadAllCategories } from \"../services/category-service\";\nimport JoditEditor from \"jodit-react\";\nimport { useRef } from \"react\";\nimport { createPost as doCreatePost } from \"../services/post-service\";\nimport { getCurrentUserDetail } from \"../auth\";\nimport { toast } from \"react-toastify\";\nimport { Navigate, useNavigate } from \"react-router-dom\";\nconst AddPost = () => {\n  const editor = useRef(null);\n  // const [content,setContent] =useState('')\n  const [categories, setCategories] = useState([]);\n  const [user, setUser] = useState(undefined);\n\n  const [post, setPost] = useState({\n    title: \"\",\n    content: \"\",\n    categoryId: \"\",\n  });\n\n  const navigate = useNavigate();\n\n  // const config={\n  //     placeholder:\"Start typing...\",\n\n  // }\n\n  useEffect(() => {\n    setUser(getCurrentUserDetail());\n    loadAllCategories()\n      .then((data) => {\n        console.log(data);\n        setCategories(data);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }, []);\n\n  //field changed function\n  const fieldChanged = (event) => {\n    // console.log(event)\n    setPost({ ...post, [event.target.name]: event.target.value });\n  };\n\n  const contentFieldChanaged = (data) => {\n    setPost({ ...post, content: data });\n  };\n\n  //create post function\n  const createPost = (event) => {\n    event.preventDefault();\n\n    // console.log(post)\n    if (post.title.trim() === \"\") {\n      toast.error(\"post  title is required !!\");\n      return;\n    }\n\n    if (post.content.trim() === \"\") {\n      toast.error(\"post content is required !!\");\n      return;\n    }\n\n    if (post.categoryId === \"\") {\n      toast.error(\"select some category !!\");\n      return;\n    }\n\n    //submit the form one server\n    post[\"userId\"] = user.id;\n    doCreatePost(post)\n      .then((data) => {\n        toast.success(\"Post Created !!\");\n        // console.log(post)\n       \n        setPost({\n          title: \"\",\n          content: \"\",\n          categoryId: \"\",\n        });\n        navigate(\"/\");\n      })\n      .catch((error) => {\n        toast.error(\"Post not created due to some error !!\");\n        // console.log(error)\n      });\n  };\n\n  return (\n    <div className=\"wrapper pt-5\">\n      <Card className=\"shadow-sm  border-0 mt-2\">\n        <CardBody>\n          {/* {JSON.stringify(post)} */}\n          <h3>What going in your mind ?</h3>\n          <Form onSubmit={createPost}>\n            <div className=\"my-3\">\n              <Label for=\"title\">Post title</Label>\n              <Input\n                type=\"text\"\n                id=\"title\"\n                placeholder=\"Enter here\"\n                className=\"rounded-0\"\n                name=\"title\"\n                onChange={fieldChanged}\n              />\n            </div>\n\n            <div className=\"my-3\">\n              <Label for=\"content\">Post Content</Label>\n              {/* <Input\n                                type=\"textarea\"\n                                id=\"content\"\n                                placeholder=\"Enter here\"\n                                className=\"rounded-0\"\n                                style={{ height: '300px' }}\n                            /> */}\n\n              <JoditEditor\n                ref={editor}\n                value={post.content}\n                onChange={(newContent) => contentFieldChanaged(newContent)}\n              />\n            </div>\n            {/* file filed */}\n            <div className=\"mt-3\">\n              <Label for=\"image\">Select Cover image<small><small><small> &nbsp;&nbsp;(local file upload not working in online version)</small></small></small></Label>\n              <Input\n                type=\"file\"\n                className=\"disabled:true\"\n              />\n            </div>\n            <div className=\"my-3\">\n              <Label for=\"category\">Post Category</Label>\n              <Input\n                type=\"select\"\n                id=\"category\"\n                placeholder=\"Enter here\"\n                className=\"rounded-0\"\n                name=\"categoryId\"\n                onChange={fieldChanged}\n                defaultValue={0}\n              >\n                <option disabled value={0}>\n                  --Select category--\n                </option>\n\n                {categories.map((category) => (\n                  <option value={category.categoryId} key={category.categoryId}>\n                    {category.categoryTitle}\n                  </option>\n                ))}\n              </Input>\n            </div>\n\n            <Container className=\"text-center\">\n              <Button type=\"submit\" className=\"rounded-0\" color=\"success\">\n                Create Post\n              </Button>\n              <Button type=\"reset\" className=\"rounded-0 ms-2\" color=\"secondary\">\n                Reset Content\n              </Button>\n            </Container>\n          </Form>\n        </CardBody>\n      </Card>\n    </div>\n  );\n};\n\nexport default AddPost;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}