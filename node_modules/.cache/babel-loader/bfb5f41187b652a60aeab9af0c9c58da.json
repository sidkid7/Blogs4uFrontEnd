{"ast":null,"code":"import _toConsumableArray from\"C:/Users/patil/Desktop/Blog Application Project/Test/blog-app-main (2)/blog-app-main/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/patil/Desktop/Blog Application Project/Test/blog-app-main (2)/blog-app-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useState}from\"react\";import{useEffect}from\"react\";import{loadAllPosts}from\"../services/post-service\";import{Row,Col,Pagination,PaginationItem,PaginationLink,Container}from\"reactstrap\";import Post from\"./Post\";import{toast}from\"react-toastify\";import InfiniteScroll from\"react-infinite-scroll-component\";import{Dropdown,DropdownToggle,DropdownMenu,DropdownItem}from\"reactstrap\";import{NavLink as ReactLink}from\"react-router-dom\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function NewFeed(){var _useState=useState({content:[],totalPages:\"\",totalElements:\"\",pageSize:\"\",lastPage:false,pageNumber:\"\"}),_useState2=_slicedToArray(_useState,2),postContent=_useState2[0],setPostContent=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),currentPage=_useState4[0],setCurrentPage=_useState4[1];useEffect(function(){console.log(\"loading posts\");console.log(currentPage);changePage(currentPage);},[currentPage]);var changePage=function changePage(){var pageNumber=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var pageSize=arguments.length>1&&arguments[1]!==undefined?arguments[1]:5;//cheaks if data is available to give and exits fuction if not.\n//if last page\nif(pageNumber>postContent.pageNumber&&postContent.lastPage){return;}//if content is empty\nif(pageNumber<postContent.pageNumber&&postContent.pageNumber==0){return;}//Get method call\nloadAllPosts(pageNumber,pageSize).then(function(data){setPostContent({content:[].concat(_toConsumableArray(postContent.content),_toConsumableArray(data.content)),totalPages:data.totalPages,totalElements:data.totalElements,pageSize:data.pageSize,lastPage:data.lastPage,pageNumber:data.pageNumber});console.log(data);}).catch(function(error){toast.error(\"Error in loading posts\");});};var changePageInfinite=function changePageInfinite(){console.log(\"page chagned\");setCurrentPage(currentPage+1);};var toggle=function toggle(){return setDropdownOpen(function(prevState){return!prevState;});};var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),dropdownOpen=_useState6[0],setDropdownOpen=_useState6[1];return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid pt-4 pe-1 ps-1\",children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{md:{size:10,offset:1},children:[/*#__PURE__*/_jsx(\"div\",{className:\"pt-2 d-flex align-items-center justify-content-center justify-content-md-start\",children:/*#__PURE__*/_jsxs(Dropdown,{isOpen:dropdownOpen,toggle:toggle,children:[/*#__PURE__*/_jsxs(DropdownToggle,{caret:true,color:\"white\",className:\"categorySelect \",children:[\"All Blogs( \",postContent===null||postContent===void 0?void 0:postContent.totalElements,\" )\"]}),/*#__PURE__*/_jsxs(DropdownMenu,{className:\"dropMenu\",children:[/*#__PURE__*/_jsx(DropdownItem,{header:true,children:\"All\"}),/*#__PURE__*/_jsx(DropdownItem,{tag:ReactLink,to:\"/science\",children:\"Science\"}),/*#__PURE__*/_jsx(DropdownItem,{tag:ReactLink,to:\"/technology\",children:\"Technology\"}),/*#__PURE__*/_jsx(DropdownItem,{tag:ReactLink,to:\"/personalblogs\",children:\"Personal blogs\"}),/*#__PURE__*/_jsx(DropdownItem,{tag:ReactLink,to:\"/educational\",children:\"Educational\"}),/*#__PURE__*/_jsx(DropdownItem,{tag:ReactLink,to:\"/financial\",children:\"Financial\"}),/*#__PURE__*/_jsx(DropdownItem,{tag:ReactLink,to:\"/travel\",children:\"Travel\"}),/*#__PURE__*/_jsx(DropdownItem,{tag:ReactLink,to:\"/health\",children:\"Health\"}),/*#__PURE__*/_jsx(DropdownItem,{tag:ReactLink,to:\"/food\",children:\"Food\"}),/*#__PURE__*/_jsx(DropdownItem,{tag:ReactLink,to:\"/sports\",children:\"Sports\"})]})]})}),/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:postContent.content.length,next:changePageInfinite,hasMore:!postContent.lastPage,loader:/*#__PURE__*/_jsx(\"h4\",{children:\"Loading...\"}),endMessage:/*#__PURE__*/_jsx(\"p\",{style:{textAlign:\"center\"},children:/*#__PURE__*/_jsx(\"b\",{children:\"Yay! You have seen it all\"})}),children:postContent.content.map(function(post,index){return/*#__PURE__*/_jsx(Post,{post:post},index)//Post fuction is called here to display data.\n;})})]})})});}export default NewFeed;","map":{"version":3,"names":["React","useState","useEffect","loadAllPosts","Row","Col","Pagination","PaginationItem","PaginationLink","Container","Post","toast","InfiniteScroll","Dropdown","DropdownToggle","DropdownMenu","DropdownItem","NavLink","ReactLink","NewFeed","content","totalPages","totalElements","pageSize","lastPage","pageNumber","postContent","setPostContent","currentPage","setCurrentPage","console","log","changePage","then","data","catch","error","changePageInfinite","toggle","setDropdownOpen","prevState","dropdownOpen","size","offset","length","textAlign","map","post","index"],"sources":["C:/Users/patil/Desktop/Blog Application Project/Test/blog-app-main (2)/blog-app-main/src/components/NewFeed.jsx"],"sourcesContent":["import React from \"react\";\nimport { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport { loadAllPosts } from \"../services/post-service\";\nimport {\n  Row,\n  Col,\n  Pagination,\n  PaginationItem,\n  PaginationLink,\n  Container,\n} from \"reactstrap\";\nimport Post from \"./Post\";\nimport { toast } from \"react-toastify\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport {\n  Dropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem,\n} from \"reactstrap\";\nimport { NavLink as ReactLink } from \"react-router-dom\";\nfunction NewFeed() {\n  const [postContent, setPostContent] = useState({\n    content: [],\n    totalPages: \"\",\n    totalElements: \"\",\n    pageSize: \"\",\n    lastPage: false,\n    pageNumber: \"\",\n  });\n\n  const [currentPage, setCurrentPage] = useState(0);\n\n  useEffect(() => {\n    console.log(\"loading posts\");\n    console.log(currentPage);\n    changePage(currentPage);\n  }, [currentPage]);\n\n  const changePage = (pageNumber = 0, pageSize = 5) => {\n    //cheaks if data is available to give and exits fuction if not.\n    //if last page\n    if (pageNumber > postContent.pageNumber && postContent.lastPage) {\n      return;\n    }\n\n    //if content is empty\n    if (pageNumber < postContent.pageNumber && postContent.pageNumber == 0) {\n      return;\n    }\n\n    //Get method call\n    loadAllPosts(pageNumber, pageSize)\n      .then((data) => {\n        setPostContent({\n          content: [...postContent.content, ...data.content],\n          totalPages: data.totalPages,\n          totalElements: data.totalElements,\n          pageSize: data.pageSize,\n          lastPage: data.lastPage,\n          pageNumber: data.pageNumber,\n        });\n\n        console.log(data);\n      })\n      .catch((error) => {\n        toast.error(\"Error in loading posts\");\n      });\n  };\n\n  const changePageInfinite = () => {\n    console.log(\"page chagned\");\n    setCurrentPage(currentPage + 1);\n  };\n\n  const toggle = () => setDropdownOpen((prevState) => !prevState);\n  const [dropdownOpen, setDropdownOpen] = useState(false);\n\n  return (\n    <div className=\"container-fluid pt-4 pe-1 ps-1\">\n      <Row>\n        <Col\n          md={{\n            size: 10,\n            offset: 1,\n          }}\n        >\n          <div className=\"pt-2 d-flex align-items-center justify-content-center justify-content-md-start\">\n            <Dropdown isOpen={dropdownOpen} toggle={toggle}>\n              <DropdownToggle caret color=\"white\" className=\"categorySelect \">\n                All Blogs( {postContent?.totalElements} )\n              </DropdownToggle>\n              <DropdownMenu className=\"dropMenu\">\n                <DropdownItem header>All</DropdownItem>\n                <DropdownItem tag={ReactLink} to=\"/science\">\n                  Science\n                </DropdownItem>\n                <DropdownItem tag={ReactLink} to=\"/technology\">\n                  Technology\n                </DropdownItem>\n                <DropdownItem tag={ReactLink} to=\"/personalblogs\">\n                  Personal blogs\n                </DropdownItem>\n                <DropdownItem tag={ReactLink} to=\"/educational\">\n                  Educational\n                </DropdownItem>\n                <DropdownItem tag={ReactLink} to=\"/financial\">\n                  Financial\n                </DropdownItem>\n                <DropdownItem tag={ReactLink} to=\"/travel\">\n                  Travel\n                </DropdownItem>\n                <DropdownItem tag={ReactLink} to=\"/health\">\n                  Health\n                </DropdownItem>\n                <DropdownItem tag={ReactLink} to=\"/food\">\n                  Food\n                </DropdownItem>\n                <DropdownItem tag={ReactLink} to=\"/sports\">\n                  Sports\n                </DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n          </div>\n\n          <InfiniteScroll\n            dataLength={postContent.content.length}\n            next={changePageInfinite}\n            hasMore={!postContent.lastPage}\n            loader={<h4>Loading...</h4>}\n            endMessage={\n              <p style={{ textAlign: \"center\" }}>\n                <b>Yay! You have seen it all</b>\n              </p>\n            }\n          >\n            {/* postitems */}\n\n            {postContent.content.map((post, index) => (\n              <Post post={post} key={index} /> //Post fuction is called here to display data.\n            ))}\n          </InfiniteScroll>\n        </Col>\n      </Row>\n    </div>\n  );\n}\n\nexport default NewFeed;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}