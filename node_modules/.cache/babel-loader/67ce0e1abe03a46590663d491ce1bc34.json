{"ast":null,"code":"import _toConsumableArray from\"C:/Users/patil/Desktop/Blog Application Project/Test/blog-app-main (2)/blog-app-main/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/patil/Desktop/Blog Application Project/Test/blog-app-main (2)/blog-app-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useState}from'react';import{useEffect}from'react';import{loadAllPosts}from'../services/post-service';import{Row,Col,Pagination,PaginationItem,PaginationLink,Container}from'reactstrap';import Post from'./Post';import{toast}from'react-toastify';import InfiniteScroll from'react-infinite-scroll-component';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function NewFeed(){var _useState=useState({content:[],totalPages:'',totalElements:'',pageSize:'',lastPage:false,pageNumber:''}),_useState2=_slicedToArray(_useState,2),postContent=_useState2[0],setPostContent=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),currentPage=_useState4[0],setCurrentPage=_useState4[1];useEffect(function(){console.log(\"loading posts\");console.log(currentPage);changePage(currentPage);},[currentPage]);var changePage=function changePage(){var pageNumber=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var pageSize=arguments.length>1&&arguments[1]!==undefined?arguments[1]:5;if(pageNumber>postContent.pageNumber&&postContent.lastPage){return;}if(pageNumber<postContent.pageNumber&&postContent.pageNumber==0){return;}loadAllPosts(pageNumber,pageSize).then(function(data){setPostContent({content:[].concat(_toConsumableArray(postContent.content),_toConsumableArray(data.content)),totalPages:data.totalPages,totalElements:data.totalElements,pageSize:data.pageSize,lastPage:data.lastPage,pageNumber:data.pageNumber});console.log(data);}).catch(function(error){toast.error(\"Error in loading posts\");});};var changePageInfinite=function changePageInfinite(){console.log(\"page chagned\");setCurrentPage(currentPage+1);};return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid pt-5 pe-1 ps-1\",children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{md:{size:10,offset:1},children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Blogs Count  ( \",postContent===null||postContent===void 0?void 0:postContent.totalElements,\" )\"]}),/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:postContent.content.length,next:changePageInfinite,hasMore:!postContent.lastPage,loader:/*#__PURE__*/_jsx(\"h4\",{children:\"Loading...\"}),endMessage:/*#__PURE__*/_jsx(\"p\",{style:{textAlign:'center'},children:/*#__PURE__*/_jsx(\"b\",{children:\"Yay! You have seen it all\"})}),children:postContent.content.map(function(post,index){return/*#__PURE__*/_jsx(Post,{post:post},index);})})]})})});}export default NewFeed;","map":{"version":3,"names":["React","useState","useEffect","loadAllPosts","Row","Col","Pagination","PaginationItem","PaginationLink","Container","Post","toast","InfiniteScroll","NewFeed","content","totalPages","totalElements","pageSize","lastPage","pageNumber","postContent","setPostContent","currentPage","setCurrentPage","console","log","changePage","then","data","catch","error","changePageInfinite","size","offset","length","textAlign","map","post","index"],"sources":["C:/Users/patil/Desktop/Blog Application Project/Test/blog-app-main (2)/blog-app-main/src/components/NewFeed.jsx"],"sourcesContent":["import React from 'react'\nimport { useState } from 'react'\nimport { useEffect } from 'react'\nimport { loadAllPosts } from '../services/post-service'\nimport { Row, Col, Pagination, PaginationItem, PaginationLink, Container } from 'reactstrap'\nimport Post from './Post'\nimport { toast } from 'react-toastify'\nimport InfiniteScroll from 'react-infinite-scroll-component'\nfunction NewFeed() {\n\n\n    const [postContent, setPostContent] = useState({\n        content: [],\n        totalPages: '',\n        totalElements: '',\n        pageSize: '',\n        lastPage: false,\n        pageNumber: ''\n\n    })\n\n    const [currentPage, setCurrentPage] = useState(0)\n\n    useEffect(() => {\n        console.log(\"loading posts\")\n        console.log(currentPage)\n        changePage(currentPage)\n\n    }, [currentPage])\n\n\n    const changePage = (pageNumber = 0, pageSize = 5) => {\n\n        if (pageNumber > postContent.pageNumber && postContent.lastPage) {\n            return\n        }\n        if (pageNumber < postContent.pageNumber && postContent.pageNumber == 0) {\n            return\n        }\n        loadAllPosts(pageNumber, pageSize).then(data => {\n\n\n            setPostContent({\n                content: [...postContent.content, ...data.content],\n                totalPages: data.totalPages,\n                totalElements: data.totalElements,\n                pageSize: data.pageSize,\n                lastPage: data.lastPage,\n                pageNumber: data.pageNumber\n            })\n\n            console.log(data);\n\n        }).catch(error => {\n            toast.error(\"Error in loading posts\")\n\n        })\n    }\n\n    const changePageInfinite = () => {\n        console.log(\"page chagned\")\n        setCurrentPage(currentPage + 1)\n\n    }\n\n    return (\n\n\n\n        <div className=\"container-fluid pt-5 pe-1 ps-1\">\n            <Row>\n                <Col md={\n                    {\n                        size: 10,\n                        offset: 1\n                    }\n                }>\n\n                    <h1>Blogs Count  ( {postContent?.totalElements} )</h1>\n\n                    <InfiniteScroll\n                        dataLength={postContent.content.length}\n                        next={changePageInfinite}\n                        hasMore={!postContent.lastPage}\n                        loader={<h4>Loading...</h4>}\n                        endMessage={\n                            <p style={{ textAlign: 'center' }}>\n                              <b>Yay! You have seen it all</b>\n                            </p>\n                          }\n\n\n                    >\n\n\n                        {\n                            postContent.content.map((post, index) => (\n                                <Post post={post} key={index} />\n                            ))\n                        }\n\n\n\n                    </InfiniteScroll>\n\n\n                    {/* <Container className='mt-3'>\n\n                        <Pagination size='lg'>\n                            <PaginationItem onClick={() => changePage(postContent.pageNumber-1)} disabled={postContent.pageNumber == 0}>\n                                <PaginationLink previous>\n                                    Previous\n                                </PaginationLink>\n                            </PaginationItem>\n\n                            {\n                                [...Array(postContent.totalPages)].map((item, index) => (\n\n\n                                    <PaginationItem onClick={() => changePage(index)} active={index == postContent.pageNumber} key={index}>\n                                        <PaginationLink>\n\n                                            {index + 1}\n\n                                        </PaginationLink>\n                                    </PaginationItem>\n\n                                ))\n                            }\n\n\n                            <PaginationItem onClick={() => changePage(postContent.pageNumber+1)} disabled={postContent.lastPage}>\n                                <PaginationLink next>\n                                    Next\n                                </PaginationLink>\n                            </PaginationItem>\n                        </Pagination>\n\n                    </Container> */}\n\n\n\n\n\n\n                </Col>\n            </Row>\n        </div>\n\n\n    )\n}\n\nexport default NewFeed"],"mappings":"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"},"metadata":{},"sourceType":"module"}